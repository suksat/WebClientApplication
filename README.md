# ChatGPT Spring Boot program v2

ChatGPT Spring Boot program v2 deals with sending POST request to 
```https://api.openai.com/v1/completions``` 

# Spring Boot WebClient Example

This is a Spring Boot application that demonstrates how to use the `WebClient` from `org.springframework.web.reactive.function.client` to send a POST request with Bearer Token authorization and receive a JSON response from the OpenAI API.

## Requirements

- Java 8 or higher
- Maven

## Getting Started

1. Clone the repository:

```
git clone <repository-url>
```

2. Build the application:

```
cd <project-directory>
mvn clean package
```

3. Run the application:

```
mvn spring-boot:run
```

## Code Flow

1. The application starts by running the `WebClientApplication` class, which is the entry point of the Spring Boot application.

2. The `WebClientConfig` class is a Spring configuration class that sets up the `WebClient` bean with the necessary Bearer Token authorization.

3. The `CompletionController` class is a Spring MVC controller that handles the POST request to `/completions` endpoint. It uses the `WebClient` bean to send the request to the OpenAI API.

4. The `CompletionRequest` class represents the JSON request payload that will be sent to the OpenAI API. It contains the necessary parameters such as the model, prompt, temperature, max_tokens, top_p, frequency_penalty, and presence_penalty.

5. The `CompletionResponse` class represents the JSON response received from the OpenAI API. It contains properties such as id, object, created, model, choices, and usage.

6. When the `/completions` endpoint is invoked, the `getCompletion()` method in the `CompletionController` class is executed.

7. Inside the `getCompletion()` method, a new instance of `CompletionRequest` is created with the required parameters.

8. The `WebClient` sends a POST request to the specified URL (`https://api.openai.com/v1/completions`) with the JSON payload containing the `CompletionRequest`.

9. The response from the OpenAI API is deserialized into an instance of `CompletionResponse` using the `bodyToMono()` method of `WebClient`.

10. The deserialized `CompletionResponse` object is returned as the response of the `/completions` endpoint.

## Expected Output

The expected output from the OpenAI API, based on the provided example JSON response, would be:

```
{
    "id": "cmpl-7W8wbMV8jWdgaWJfLrsbSj6UUrhSm",
    "object": "text_completion",
    "created": 1687895233,
    "model": "text-davinci-003",
    "choices": [
        {
            "text": "\n\nThe average temperature in Nagpur ranges from 60 to 99°F (16 to 37°C). The average maximum temperature is around 99°F (37°C) and the average minimum temperature is around 60°F (16°C).",
            "index": 0,
            "logprobs": null,
            "finish_reason": "stop"
        }
    ],
    "usage": {
        "prompt_tokens": 6,
        "completion_tokens": 51,
        "total_tokens": 57
    }
}
```

This output represents the completion generated by the OpenAI API based on the provided prompt and model. The `text` field inside `choices` contains the completed text, and other fields provide additional information about the completion.

Feel free to modify the code and experiment with different prompts and models to generate different completions, subject to LICENSE.